
<!DOCTYPE html>
<html lang="he">
<head>
<meta charset="UTF-8">
<title>מערכת מבחנים</title>
<style>
body { font-family: Arial; padding: 20px; }
#menu button { margin: 5px; }
</style>
</head>
<body>

<h2>מערכת מבחנים</h2>
<div id="menu"></div>
<hr>
<div id="quizArea">בחר מבחן</div>

<script type="module">
import { loadProgress } from './storage.js';
import { selectItems } from './selection.js';

async function init() {
  const cfg = await (await fetch('quizzes_config.json')).json();
  const menu = document.getElementById('menu');

  cfg.quizzes.filter(q => q.enabled).forEach(q => {
    const btn = document.createElement('button');
    btn.textContent = q.title;
    btn.onclick = () => loadQuiz(q);
    menu.appendChild(btn);
  });
}

async function loadQuiz(q) {
  const quizArea = document.getElementById('quizArea');
  quizArea.textContent = 'טוען...';
  const data = await (await fetch(q.questionsFile)).json();
  const progress = loadProgress(q.id);
  const selected = selectItems(data.items, progress, q.numQuestions, q.selectionWeights);
  quizArea.innerHTML = '<pre>' + JSON.stringify(selected, null, 2) + '</pre>';
}

init();
</script>
</body>
</html>
